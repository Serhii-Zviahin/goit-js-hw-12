{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst loader = document.querySelector('.loader');\nexport const gallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery-link', {\n    captionsData: \"alt\",\n    captionPosition: \"bottom\",\n    captionDelay: 250\n});\nconst loadMore = document.querySelector('.js-load-more');\n\nexport function createGallery(images) {\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <div class=\"gallery-image-data\">\n            <p class=\"data-text\"><span class=\"bold\">Likes</span> ${likes}</p>\n            <p class=\"data-text\"><span class=\"bold\">Views</span> ${views}</p>\n            <p class=\"data-text\"><span class=\"bold\">Comments</span> ${comments}</p>\n            <p class=\"data-text\"><span class=\"bold\">Downloads</span> ${downloads}</p>\n        </div>\n    </li>`)\n        .join('');\n    gallery.insertAdjacentHTML('beforeend', markup);    \n    lightbox.refresh()\n}\n\nexport function messageNoImages() {\n    iziToast.show({\n        title: 'Sorry',\n        message: ', there are no images matching your search query. Please try again!',\n        position: `topRight`,\n        messageColor: '#fffc3aff',\n        backgroundColor: \"#ec3939\",\n    });\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n    loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n    loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n        loadMore.classList.remove('hidden');\n} \n\nexport function hideLoadMoreButton() {    \n        loadMore.classList.add('hidden');\n}\nexport function messageEndSearch() {\n    iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results\",\n                position: `topRight`,\n                messageColor: '#fffc3aff',\n                backgroundColor: \"#394becb4\",\n            });\n}\nexport function messageNotImage() {\n    iziToast.show({\n                    message: 'Image not found',\n                    position: `topRight`,\n                    messageColor: '#fffc3aff',\n                    backgroundColor: \"#ec3939\",\n                })\n}\nexport function messageNotInput() {\n    iziToast.show({\n            message: 'Input field is empty',\n            position: `topRight`,\n            messageColor: '#fffc3aff',\n            backgroundColor: \"#ec3939\",\n        })\n}\nexport function messageSomethingWrong() {\n    iziToast.error({\n            message: 'Sorry, something went wrong. Please try again!',\n            position: \"topRight\",\n        })\n}","import axios from \"axios\";\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { messageNoImages } from \"./render-functions\";\n\nconst url = \"https://pixabay.com/api/\";\nconst myAPI_KEY = \"52805725-7d516d36c1804a9cebba9806b\";\nexport const per_page = 15;\n\nexport async function getImagesByQuery(queryWord, page = 1) {\n    try {\n        const response = await axios(url, {\n            params: {\n                key: myAPI_KEY,\n                q: queryWord,                // слово з пошукового поля\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page,\n                per_page\n            }\n        });\n        if (response.data.hits.length > 0) {\n            return response.data;\n        } else {\n            messageNoImages();\n            return [];\n        }\n    } catch (error) {       \n        iziToast.show({\n        message: error.message,\n        position: `topRight`,\n        messageColor: '#fffc3aff',\n        backgroundColor: \"#ec3939\",\n    })}\n};","import { getImagesByQuery, per_page } from \"./js/pixabay-api\";\nimport { clearGallery, createGallery, hideLoader, hideLoadMoreButton, messageEndSearch,  messageNoImages,  messageNotImage,  messageNotInput,  messageSomethingWrong, showLoader, showLoadMoreButton } from \"./js/render-functions\";\n\nconst form = document.querySelector('.form');\nconst imageInput = form.querySelector('input[name=\"search-text\"]');\n\nform.addEventListener('submit', handleSubmit);\nconst loadMore = document.querySelector('.js-load-more');\nloadMore.addEventListener('click', onLoadMore);\n\nhideLoadMoreButton();\n\nlet page;\nlet queryWord;\nlet totalPages;\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    clearGallery();\n    showLoader();\n    hideLoadMoreButton();\n    \n    page = 31;\n    queryWord = imageInput.value;\n    \n    if (!queryWord.trim().length) {   \n        messageNotInput();\n        hideLoader();\n        form.reset();\n        return; \n    }\n\n        try {\n            const images = await getImagesByQuery(queryWord, page);\n            hideLoader();\n            if (!images.totalHits) {\n                messageNoImages(); \n                return;\n            }\n\n            totalPages = Math.ceil(images.totalHits / per_page);\n\n            createGallery(images.hits);\n            form.reset();\n            \n            if (page >= totalPages) {\n                messageEndSearch();\n                return;\n            }\n            \n            showLoadMoreButton();\n        \n        } catch(error) {\n            messageSomethingWrong();\n            \n        } finally {\n            hideLoader();\n        }\n}\n\nasync function onLoadMore() {\n    page++;\n    loadMore.disabled = true;\n\n    try {\n        showLoader();\n        const data = await getImagesByQuery(queryWord, page);\n        createGallery(data.hits);\n\n        if (page >= totalPages) {\n            messageEndSearch(); \n            hideLoadMoreButton();\n            return;\n        }\n\n        showLoadMoreButton();\n\n        const card = document.querySelector('.gallery-item');\n        const info = card.getBoundingClientRect();\n        const heightCard = info.height;\n        window.scrollBy({\n            top: heightCard * 2,\n            behavior: 'smooth'\n        });\n\n    } catch (error) {\n        page--;\n        messageSomethingWrong();  \n\n    } finally {\n        loadMore.disabled = false;\n        hideLoader();\n    }\n}"],"names":["loader","gallery","lightbox","SimpleLightbox","loadMore","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","messageNoImages","iziToast","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","messageEndSearch","messageNotInput","messageSomethingWrong","url","myAPI_KEY","per_page","getImagesByQuery","queryWord","page","response","axios","error","form","imageInput","handleSubmit","onLoadMore","totalPages","event","data","heightCard"],"mappings":"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"}